/*
 RequireJS Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
 Available via the MIT, GPL or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var require;
(function(){function j(a){return C.call(a)==="[object Function]"}function D(a){return function(b){a.exports=b}}var m={},f,k,h=[],n,o,t,r,l,p={},q,y=/^(complete|loaded)$/,x,v=!!(typeof window!=="undefined"&&navigator&&document),E=!v&&typeof importScripts!=="undefined",C=Object.prototype.toString,H,c,F;if(typeof require!=="undefined")if(j(require))return;else p=require;c=require=function(a,b,d,e){var i;if(typeof a==="string"&&!j(b))return require.get(a,b);if(!require.isArray(a)){i=a;if(require.isArray(b)){a=b;
b=d;d=e}else a=[]}return x(null,a,b,i,d)};c.onError=function(a){throw a;};c.def=function(a,b,d,e){if(!c.isArray(b)){e=d;d=b;b=[]}return x(a,b,d,null,e)};x=function(a,b,d,e,i){var g=f.contexts[i],s,z;i=i?i:e&&e.context?e.context:f.ctxName;g=f.contexts[i];if(a)if(g&&(g.defined[a]||g.waiting[a]))return c;if(!g){g={contextName:i,config:{waitSeconds:7,baseUrl:f.baseUrl||"./",paths:{}},waiting:[],specified:{require:true,exports:true,module:true},loaded:{require:true},urlFetched:{},defined:{},modifiers:{}};
g.defined.require=c;g=f.contexts[i]=g}if(e){if(e.baseUrl)if(e.baseUrl.charAt(e.baseUrl.length-1)!=="/")e.baseUrl+="/";z=g.config.paths;c.mixin(g.config,e,true);if(e.paths){for(s in e.paths)s in m||(z[s]=e.paths[s]);g.config.paths=z}if(e.priority){c(e.priority);g.config.priorityWait=e.priority}if(e.deps||e.callback)c(e.deps||[],e.callback);e.ready&&c.ready(e.ready);if(!b)return c}if(b){e=b;b=[];for(s=0;s<e.length;s++)b[s]=c.splitPrefix(e[s],a)}e=g.waiting.push({name:a,deps:b,callback:d});if(a){g.waiting[a]=
e-1;g.specified[a]=true}if(a&&d&&!c.isFunction(d))g.defined[a]=d;if(f.paused||g.config.priorityWait)(f.paused||(f.paused=[])).push([void 0,a,b,g]);else{c.checkDeps(void 0,a,b,g);c.checkLoaded(i)}if(a)g.loaded[a]=true;return c};c.mixin=function(a,b,d){for(var e in b)if(!(e in m)&&(!(e in a)||d))a[e]=b[e];return c};c.version="0.13.0";f=c.s={ctxName:"_",contexts:{},skipAsync:{},isBrowser:v,isPageLoaded:!v,readyCalls:[],doc:v?document:null};c.isBrowser=f.isBrowser;if(v){f.head=document.getElementsByTagName("head")[0];
if(F=document.getElementsByTagName("base")[0])f.head=F.parentNode}c.pause=function(){if(!f.paused)f.paused=[]};c.resume=function(){var a,b,d;if(!f.contexts[f.ctxName].config.priorityWait){if(f.paused){d=f.paused;delete f.paused;for(a=0;b=d[a];a++)c.checkDeps.apply(c,b)}c.checkLoaded(f.ctxName)}};c.checkDeps=function(a,b,d,e){if(!a)for(a=0;b=d[a];a++)if(!e.specified[b.fullName]){e.specified[b.fullName]=true;e.startTime=(new Date).getTime();b.prefix||c.load(b.name,e.contextName)}};c.isArray=function(a){return C.call(a)===
"[object Array]"};c.isFunction=j;c.get=function(a,b){if(a==="exports"||a==="module")return c.onError(new Error("require of "+a+" is not allowed."));b=b||f.ctxName;var d=f.contexts[b].defined[a];if(d===undefined)return c.onError(new Error("require: module name '"+a+"' has not been loaded yet for context: "+b));return d};c.load=function(a,b){var d=f.contexts[b],e=d.urlFetched;d=d.loaded;f.isDone=false;d[a]||(d[a]=false);d=c.nameToUrl(a,null,b);if(!e[d]){c.attach(d,b,a);e[d]=true}};c.jsExtRegExp=/\.js$/;
c.normalizeName=function(a,b){if(a.charAt(0)==="."){b=b.split("/");b=b.slice(0,b.length-1);a=b.concat(a.split("/"));for(k=0;b=a[k];k++)if(b==="."){a.splice(k,1);k-=1}else if(b===".."){a.splice(k-1,2);k-=2}a=a.join("/")}return a};c.splitPrefix=function(a,b){var d=a.indexOf("!"),e=null;if(d!==-1){e=a.substring(0,d);a=a.substring(d+1,a.length)}if(b)a=c.normalizeName(a,b);return{prefix:e,name:a,fullName:e?e+"!"+a:a}};c.nameToUrl=function(a,b,d){var e,i,g;d=f.contexts[d].config;if(a.indexOf(":")!==-1||
a.charAt(0)==="/"||c.jsExtRegExp.test(a))return a+(b?b:"");else if(a.charAt(0)===".")return c.onError(new Error("require.nameToUrl does not handle relative module names (ones that start with '.' or '..')"));else{e=d.paths;a=a.split("/");for(i=a.length;i>0;i--){g=a.slice(0,i).join("/");if(e[g]){a.splice(0,i,e[g]);break}}b=a.join("/")+(b||".js");return(b.charAt(0)==="/"||b.match(/^\w+:/)?"":d.baseUrl)+b}};c.checkLoaded=function(a){var b=f.contexts[a||f.ctxName],d=b.config.waitSeconds*1E3,e=d&&b.startTime+
d<(new Date).getTime(),i,g;d="";var s=false,z=false,u,A,G={};if(!b.isCheckLoaded){if(b.config.priorityWait){g=true;for(i=0;A=b.config.priorityWait[i];i++)if(!b.loaded[A]){g=false;break}if(g){delete b.config.priorityWait;c.resume()}else return}b.isCheckLoaded=true;g=b.waiting;i=b.loaded;for(u in i)if(!(u in m)){s=true;if(!i[u])if(e)d+=u+" ";else{z=true;break}}if(!s&&!g.length)b.isCheckLoaded=false;else{if(e&&d){b=new Error("require.js load timeout for modules: "+d);b.requireType="timeout";b.requireModules=
d;return c.onError(b)}if(z){b.isCheckLoaded=false;if(v||E)setTimeout(function(){c.checkLoaded(a)},50)}else{b.waiting=[];b.loaded={};for(i=0;d=g[i];i++)c.exec(d,G,g,b);b.isCheckLoaded=false;if(b.waiting.length)c.checkLoaded(a);else if(!h.length){f.ctxName="_";f.isDone=true;c.callReady&&c.callReady()}}}}};c.exec=function(a,b,d,e){if(a){var i=a.name,g=a.callback;g=a.deps;var s,z,u=e.defined,A,G=[],w,B,I=false;if(i){if(b[i]||i in u)return u[i];b[i]=true}if(g)for(s=0;z=g[s];s++){w=z.name;if(w==="exports"){w=
u[i]={};I=true}else if(w==="module"){B=w={id:i,uri:i?c.nameToUrl(i,null,e.contextName):undefined};B.setExports=D(B)}else w=w in u?u[w]:b[w]?undefined:c.exec(d[d[w]],b,d,e);G.push(w)}if((g=a.callback)&&c.isFunction(g)){A=c.execCb(i,g,G);if(i)if(I&&(!B||!("exports"in B)))A=u[i];else if(B&&"exports"in B)A=u[i]=w.exports;else{if(i in u)return c.onError(new Error(i+" has already been defined"));u[i]=A}}return A}};c.execCb=function(a,b,d){return b.apply(null,d)};c.onScriptLoad=function(a){var b=a.currentTarget||
a.srcElement,d;if(a.type==="load"||y.test(b.readyState)){a=b.getAttribute("data-requirecontext");d=b.getAttribute("data-requiremodule");f.contexts[a].loaded[d]=true;c.checkLoaded(a);b.removeEventListener?b.removeEventListener("load",c.onScriptLoad,false):b.detachEvent("onreadystatechange",c.onScriptLoad)}};c.attach=function(a,b,d,e,i){var g;if(v){e=e||c.onScriptLoad;g=document.createElement("script");g.type=i||"text/javascript";g.charset="utf-8";if(!f.skipAsync[a])g.async=true;g.setAttribute("data-requirecontext",
b);g.setAttribute("data-requiremodule",d);g.addEventListener?g.addEventListener("load",e,false):g.attachEvent("onreadystatechange",e);g.src=a;return F?f.head.insertBefore(g,F):f.head.appendChild(g)}else if(E){b=f.contexts[b].loaded;b[d]=false;importScripts(a);b[d]=true}return null};f.baseUrl=p.baseUrl;if(v&&(!f.baseUrl||!f.head)){n=document.getElementsByTagName("script");t=p.baseUrlMatch?p.baseUrlMatch:/(allplugins-|transportD-)?require\.js(\W|$)/i;for(k=n.length-1;k>-1&&(o=n[k]);k--){if(!f.head)f.head=
o.parentNode;if(!p.deps)if(r=o.getAttribute("data-main"))p.deps=[r];if((r=o.src)&&!f.baseUrl)if(l=r.match(t)){f.baseUrl=r.substring(0,l.index);break}}}c.pageLoaded=function(){if(!f.isPageLoaded){f.isPageLoaded=true;H&&clearInterval(H);if(q)document.readyState="complete";c.callReady()}};c.callReady=function(){var a=f.readyCalls,b,d;if(f.isPageLoaded&&f.isDone&&a.length){f.readyCalls=[];for(b=0;d=a[b];b++)d()}};c.ready=function(a){f.isPageLoaded&&f.isDone?a():f.readyCalls.push(a);return c};if(v){if(document.addEventListener){document.addEventListener("DOMContentLoaded",
c.pageLoaded,false);window.addEventListener("load",c.pageLoaded,false);if(!document.readyState){q=true;document.readyState="loading"}}else if(window.attachEvent){window.attachEvent("onload",c.pageLoaded);if(self===self.top)H=setInterval(function(){try{if(document.body){document.documentElement.doScroll("left");c.pageLoaded()}}catch(a){}},30)}document.readyState==="complete"&&c.pageLoaded()}c(p)})();
require.def("lingwo_dictionary/annotation/Reader",["jquery"],function(j){function D(l,p,q){old_fn=l[p];l[p]=function(){old_fn.apply(this,arguments);q()}}var m,f,k,h,n=false,o,t,r;return{callback:function(){},popup:true,activated:true,shown:false,setup:function(l,p,q){function y(){if(!q){m.show();var x=k.offset(),v=h.offset().top;m.outerWidth();m.innerWidth();var E=m.outerHeight()-m.innerHeight(),C=Math.max(x.top-j(window).scrollTop()+1,0);v=Math.min(v-j(window).scrollTop()-C-t+1,j(window).height()-
C)-E;m.css({left:x.left-j(window).scrollLeft(),top:C,height:v})}}this.callback=p;if(typeof q!=="undefined")this.popup=q;else q=this.popup;m||(m=j("<div></div>").attr("id","lingwo-korpus-entry-view-wrapper").addClass(q?"popup":"docked").appendTo(j("body")).hide());f||(f=j("<div></div>").attr("id","lingwo-korpus-entry-view").appendTo(m));if(!k){k=j("#lingwo-korpus-dock",l);o=k.attr("data-footer-id");t=k.attr("data-footer-margin")}h||(h=j("#"+o,l));if(!q){f.html("<em>Click a word in the text to look it up in the dictionary.</em>");
setTimeout(y,0)}if(!n){j(window).scroll(y);j(window).resize(y);typeof window.Drupal!=="undefined"&&Drupal.adminToolbar&&D(Drupal.adminToolbar,"setState",function(){if(!q){m.hide();setTimeout(y,500)}});n=true}},activate:function(l){l||this.clearSelection();this.activated=l},clearSelection:function(){if(r){r.removeClass("selected");r=null}},hideDialog:function(){this.popup&&m.hide();this.shown=false;this.clearSelection()},showDialog:function(l){l=j(l);var p;this.clearSelection();p=l.offset();if(this.popup){var q=
p.left+l.width()/2-150;p=p.top+l.height()+40;var y=j(document).width();if(q+300>y)q=y-300;if(q<0)q=0;m.show().css({left:q,top:p,height:""})}r=l;l.addClass("selected");this.shown=true;this.callback(l,f,function(x){x!==null&&typeof x!=="undefined"&&f.html(x);this.popup&&m.height()>200&&m.css({height:200})})},onClick:function(l){if(!this.activated)return true;l=j(l.target);this.clearSelection();if(l.hasClass("anno")){this.showDialog(l);return false}this.hideDialog();return true}}});
require.def("lingwo_dictionary/annotation/Embed",["jquery","lingwo_dictionary/annotation/Reader"],function(j,D){function m(h,n,o){var t;for(t in n)if(!o||typeof h[t]=="undefined")h[t]=n[t]}function f(h,n,o){var t=h.attr("data-sense");o("Loading ...");j.ajax({url:k.url+"/lingwo_korpus/lookup_entry",dataType:"jsonp",data:{url:h.attr("href")},success:function(r){o(r.content);j(".node",n).removeClass("clear-block").removeAttr("id");j("ul.links.inline",n).remove();t&&j(".lingwo-sense-id-"+t,n).addClass("selected")}})}
var k={};if(typeof window.BiblioBird!="undefined")k=window.BiblioBird;m(k,{url:"http://www.bibliobird.com",lang:"en"},true);m(k,{initialized:false,contentAreas:[],embedWindow:null,embedIframe:null,embedWindowShown:false,username:null,start:function(){var h=this;j(".bibliobird-content").each(function(){h.contentAreas.push(new ContentArea(this))})},initialize:function(h){function n(){var r=(j(window).width()-400)/2,l=(j(window).height()-200)/2;o.css({top:l,left:r})}if(!this.initialized){var o=j('<div class="clear-block"><div class="bibliobird-embed-titlebar"><span class="bibliobird-embed-title">BiblioBird</span> <a href="#" class="bibliobird-embed-close">close</a></div></div>'),
t=j('<iframe height="100%" width="100%" border="0" id="bibliobirdEmbedIframe" name="bibliobirdEmbedIframe"></iframe>').appendTo(o);o.css({width:400,height:200,position:"fixed",border:"1px solid black",background:"white"}).hide().appendTo(j("body"));j(".bibliobird-embed-close",o).click(function(){k.hideEmbedWindow();return false});j(window).resize(n);setTimeout(n,0);D.setup(j("body"),f,true);j("body").click(function(r){k.hideEmbedWindow();return D.onClick(r)});m(this,{embedWindow:o,embedIframe:t,username:h,
initialized:true})}},receiveMessage:function(h){if(h.indexOf("#login-successful")==0){h=h.split(":");if(h[1])this.username=h[1];this.hideEmbedWindow()}},openEmbedWindow:function(h){if(this.embedWindow!==null&&!this.embedWindowShown){this.embedIframe.attr("src",h);this.embedWindow.show();this.embedWindowShown=true}},hideEmbedWindow:function(){if(this.embedWindow!==null&&this.embedWindowShown){this.embedWindow.hide();this.embedWindowShown=false;this.refreshAll()}},logout:function(){var h=this;j.ajax({url:k.url+
"/lingwo_korpus/rlogout",dataType:"jsonp",success:function(){h.username=null;h.refreshAll()}})},refreshAll:function(){j.each(this.contentAreas,function(){this.refresh()})}});ContentArea=function(h){this.node=h;this.from_lang=j(h).attr("data-from-lang");this.to_lang=j(h).attr("data-to-lang");this.url=j(h).attr("data-url")||window.location.href;this.teaser=j(h).attr("data-teaser")=="true";this.links=j('<div class="bibliobird-links"></div>').insertBefore(h);this.data={};this.lookupContent()};m(ContentArea.prototype,
{lookupContent:function(){var h=this;j.ajax({url:k.url+"/lingwo_korpus/lookup_content",dataType:"jsonp",data:{url:this.url,to_lang:this.to_lang},success:function(n){k.initialize(n.username);h.data=n;h.rebuildLinks();if(n.content)h.node.innerHTML=n.content}})},rebuildLinks:function(){var h=this.links,n=this.data;h.html("");if(k.username){h.append("Logged into BiblioBird as "+k.username+" ");h.append(j("<a></a>").html("Logout").attr("href",k.url+"/logout").click(function(){k.logout();return false}))}else{h.append("Not logged into BiblioBird ");
h.append(j("<a></a>").html("Login").attr("href",k.url+"/lingwo_korpus/rlogin"+(k.localRelayUrl?"?relay="+k.localRelayUrl:"")).click(function(o){k.openEmbedWindow(o.target.href);return false}));h.append(" ");h.append(j("<a></a>").html("Join BiblioBird").attr({href:k.url+"/user/register",target:"_blank"}))}h.append(" ");n.not_found&&h.append(j("<a></a>").html("Add to Bibliobird").attr({href:k.url+"/node/add/content?remote_url="+escape(url),target:"_blank"}))},refresh:function(){this.rebuildLinks()}});
k.start();window.BiblioBird=k});require.def("jquery",[],function(){return window.jQuery});require.def("jQuery",[],function(){return window.jQuery});